<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<title>EcoHuella - Resultado Transporte</title>

<style>
    /* Animación para el enlace de recomendaciones */
    .recomendaciones-link {
    color: #0EB07C;
    text-decoration: underline;
    cursor: pointer;
    transition: color 0.3s ease, transform 0.3s ease;
      animation: pulse 2s infinite; /* Animación de pulso */
    }
    .recomendaciones-link:hover { /* al pasar el cursor */
    color: #EB8028;
    transform: scale(1.05);
    }
    @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
    }
</style>


</head>
<body>
<header class="header">
    <div class="header__text">
    <h1>Descubre tu Huella de Carbono con EcoHuella</h1>
    <p>¡Calcula, reduce y salva el planeta! Responde preguntas simples sobre tu estilo de vida y obtén consejos personalizados para un futuro sostenible.</p>
    </div>
</header>
<main>
    {% block content %}
    <h2 class="main__title main__title--margin">Tu huella de carbono en transporte:</h2>
    <div class="main__rez" id="end"> <!-- contenedor para resultado--> 
        
        {%if impacto == "bajo"%}
        <img class="rez__img" src="{{ url_for('static', filename='img/planet_good.svg') }}" alt="">
        <span>Tu impacto es {{ impacto }}</span>
        <span>¡Excelente! Tu huella en transporte es baja. Sigue usando bici, transporte público o carpooling. 
            <a class="recomendaciones-link" onclick="reproducirRecomendaciones('{{ impacto }}')">Escuchar Recomendaciones Personalizadas.</a></span>
        
            {%elif impacto == "medio"%}
        <img class="rez__img" src="{{ url_for('static', filename='img/planet_medium.svg') }}" alt="">
        <span>Tu impacto es {{ impacto }}</span>
        <span>Tu huella en transporte es media. Intenta reducir viajes en carro o compartir más. 
            <a class="recomendaciones-link" onclick="reproducirRecomendaciones('{{ impacto }}')">Escuchar Recomendaciones Personalizadas.</a></span>
        
            {%elif impacto == "alto"%}
        <img class="rez__img" src="{{ url_for('static', filename='img/planet_bad.svg') }}" alt="">
        <span>Tu impacto es {{ impacto }}</span>
        <span>¡Tu huella de carbono en transporte es alta! 
            <a class="recomendaciones-link" onclick="reproducirRecomendaciones('{{ impacto }}')">Escuchar Recomendaciones Personalizadas.</a></span>
        {%endif%}
    </div>
    <a href="/" class="main__link">Volver al inicio</a>
    {% endblock %}
</main>


<script>
    // Función para reproducir recomendaciones personalizadas
    function reproducirRecomendaciones(impacto) {
        const synth = window.speechSynthesis; <!-- Obtener el sintetizador de voz -->
        let mensaje = ""; /* Mensaje a reproducir */
    
        if (impacto === 'bajo') {
        mensaje = "Hola, soy tu asistente de EcoHuella. ¡Felicidades! Tu huella en transporte es baja, lo que significa que ya estás contribuyendo mucho al planeta. Sigue caminando o usando la bici en rutas más largas para mantenerte en forma, comparte tus tips sostenibles con amigos para inspirarlos, considera apps de carpooling para viajes ocasionales y reduce aún más emisiones, monitorea tus kilómetros mensuales y celebra cada logro. ¡Eres un ejemplo de movilidad verde!";
    } else if (impacto === 'medio') {
        mensaje = "Hola, soy tu asistente de EcoHuella. Tu huella en transporte es media, lo cual es un buen punto de partida. Reduce viajes en carro privado optando por transporte público diario, únete a grupos de carpooling para trayectos largos y ahorra combustible, camina o usa bici para distancias cortas como ir al supermercado, planifica rutas eficientes para minimizar tiempo y emisiones, e involucra a tu familia en hábitos compartidos. ¡Pequeños cambios suman!";
    } else if (impacto === 'alto') {
        mensaje = "Hola, soy tu asistente de EcoHuella. Tu huella en transporte es alta, pero no te preocupes, podemos mejorarla juntos. Cambia a transporte público o bici para la mayoría de tus desplazamientos, evita viajes innecesarios combinando tareas en un solo trayecto, considera vehículos eléctricos o híbridos para reducir emisiones, únete a comunidades locales de movilidad sostenible para apoyo, y establece metas semanales para disminuir el uso del carro personal. ¡Cada paso cuenta para un futuro más verde!";
    }

    // Configurar y reproducir: Ajusta voz, velocidad, tono y volumen, luego habla (elige voz en español y reproduce el mensaje).
    const voices = synth.getVoices(); // lista de voces disponibles
    let selectedVoice = voices.find(voice => voice.lang === 'es-ES' && voice.name.includes('Female')); // voz femenina en español
    if (!selectedVoice) selectedVoice = voices.find(voice => voice.lang === 'es-ES'); // si no hay femenina, cualquier voz en español

    const utterance = new SpeechSynthesisUtterance(mensaje); // para que se pueda decir el mensaje
    utterance.voice = selectedVoice; // asigna la voz seleccionada
    utterance.rate = 1; // velocidad
    utterance.pitch = 1.1; // tono
    utterance.volume = 1;

    synth.speak(utterance); // reproduce el mensaje
}


</script>


</body>
</html>