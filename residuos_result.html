<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<title>EcoHuella - Resultado Residuos</title>

<style>
  /* Animación para el enlace de recomendaciones */
    .recomendaciones-link {
    color: #0EB07C;
    text-decoration: underline;
    cursor: pointer;
    transition: color 0.3s ease, transform 0.3s ease;
    animation: pulse 2s infinite; /* Animación de pulso */
    }
    .recomendaciones-link:hover {
    color: #EB8028;
    transform: scale(1.05);
    }
    @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
    }
</style>

</head>
<body>

<header class="header">
    <div class="header__text">
    <h1>Descubre tu Huella de Carbono con EcoHuella</h1>
    <p>¡Calcula, reduce y salva el planeta! Responde preguntas simples sobre tu estilo de vida y obtén consejos personalizados para un futuro sostenible.</p>
    </div>
</header>
<main>
    {% block content %}
    <h2 class="main__title main__title--margin">Tu huella de carbono en residuos:</h2>
    <div class="main__rez" id="end">
        {%if impacto == "bajo"%}
        <img class="rez__img" src="{{ url_for('static', filename='img/planet_good.svg') }}" alt="">
        <span>Tu impacto es {{ impacto }}</span>
        <span>¡Excelente! Tu huella en transporte es baja. Sigue usando bici, transporte público o carpooling. 
            <a class="recomendaciones-link" onclick="reproducirRecomendaciones('{{ impacto }}')">Escuchar Recomendaciones Personalizadas.</a></span>
        {%elif impacto == "medio"%}
        <img class="rez__img" src="{{ url_for('static', filename='img/planet_medium.svg') }}" alt="">
        <span>Tu impacto es {{ impacto }}</span>
        <span>Tu huella en transporte es media. Intenta reducir viajes en carro o compartir más. 
            <a class="recomendaciones-link" onclick="reproducirRecomendaciones('{{ impacto }}')">Escuchar Recomendaciones Personalizadas.</a></span>
        {%elif impacto == "alto"%}
        <img class="rez__img" src="{{ url_for('static', filename='img/planet_bad.svg') }}" alt="">
        <span>Tu impacto es {{ impacto }}</span>
        <span>¡Tu huella de carbono en transporte es alta! 
            <a class="recomendaciones-link" onclick="reproducirRecomendaciones('{{ impacto }}')">Escuchar Recomendaciones Personalizadas.</a></span>
        {%endif%}
    </div>
    <a href="/" class="main__link">Volver al inicio</a>
    {% endblock %}
</main>


<script>
    // Función para reproducir recomendaciones personalizadas
    function reproducirRecomendaciones(impacto) {
        const synth = window.speechSynthesis;
        let mensaje = '';

        if (impacto === 'bajo') {
            mensaje = "Hola, soy tu asistente de EcoHuella. ¡Excelente trabajo! Tu manejo de residuos es bajo, lo que significa que ya estás cuidando el planeta de manera increíble. Sigue usando bolsas reutilizables en tus compras, considera compostar tus residuos orgánicos en casa para reducir aún más, involucra a tu familia en hábitos de reciclaje para mantener el momentum, explora apps de reciclaje local para optimizar tus esfuerzos, y recuerda que cada pequeño cambio suma para un futuro más verde. ¡Sigue así!";
        } else if (impacto === 'medio') {
            mensaje = "Hola, soy tu asistente de EcoHuella. Tu huella en residuos es media, un gran lugar para empezar mejoras. Reduce el uso de plásticos de un solo uso cambiando a alternativas reutilizables, separa tus residuos en orgánicos e inorgánicos para facilitar el reciclaje, compra productos con empaques mínimos o reciclables, participa en campañas de limpieza comunitaria para concienciar a otros, y monitorea tu consumo semanal ajustando hábitos poco a poco. ¡Pequeños pasos hacen una gran diferencia!";
        } else if (impacto === 'alto') {
            mensaje = "Hola, soy tu asistente de EcoHuella. Tu huella de carbono en residuos es alta, pero podemos cambiar eso juntos. Empieza por eliminar plásticos desechables de tu rutina diaria, implementa un sistema de reciclaje en casa separando correctamente, opta por productos locales con menos empaques para reducir basura, educa a tus amigos y familia sobre la importancia de disminuir residuos, y considera donar o reutilizar objetos en lugar de tirarlos. ¡Cada acción cuenta para un planeta más limpio!";
        }

      // Configurar y reproducir
        const voices = synth.getVoices();
        let selectedVoice = voices.find(voice => voice.lang === 'es-ES' && voice.name.includes('Female'));
        if (!selectedVoice) selectedVoice = voices.find(voice => voice.lang === 'es-ES');

        const utterance = new SpeechSynthesisUtterance(mensaje);
        utterance.voice = selectedVoice;
        utterance.rate = 0.9; // Velocidad más lenta
        utterance.pitch = 1.1; // Tono más natural
        utterance.volume = 1; // Volumen máximo

        synth.speak(utterance);
    }

{
    

    // Configurar y reproducir
    const voices = synth.getVoices();
    let selectedVoice = voices.find(voice => voice.lang === 'es-ES' && voice.name.includes('Female'));
    if (!selectedVoice) selectedVoice = voices.find(voice => voice.lang === 'es-ES');

    const utterance = new SpeechSynthesisUtterance(mensaje);
    utterance.voice = selectedVoice;
    utterance.rate = 1;
    utterance.pitch = 1.1;
    utterance.volume = 1;

    synth.speak(utterance);
}


</script>


</body>
</html>